<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  
  
  <link rel="shortcut icon" href="../img/favicon.ico">
  <title>Spatialization: Sounds in 3D - CrSFML Tutorials</title>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700" />

  <link rel="stylesheet" href="../css/theme.css" />
  <link rel="stylesheet" href="../css/theme_extra.css" />
  <link href="../codehilite.css" rel="stylesheet" />
  <link href="../style.css" rel="stylesheet" />
  
  <script>
    // Current page data
    var mkdocs_page_name = "Spatialization: Sounds in 3D";
    var mkdocs_page_input_path = "audio/spatialization.md";
    var mkdocs_page_url = null;
  </script>
  
  <script src="../js/jquery-2.1.1.min.js" defer></script>
  <script src="../js/modernizr-2.8.3.min.js" defer></script> 
  
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
        <a href=".." class="icon icon-home"> CrSFML Tutorials</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
                <p class="caption"><span class="caption-text">System module</span></p>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../system/time.html">Handling time</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../system/thread.html">Threads</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../system/stream.html">User data streams</a>
                    </li>
                </ul>
                <p class="caption"><span class="caption-text">Window module</span></p>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../window/window.html">Opening and managing an SFML window</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../window/events.html">Events explained</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../window/inputs.html">Keyboard, mouse and joysticks</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../window/opengl.html">Using OpenGL in an SFML window</a>
                    </li>
                </ul>
                <p class="caption"><span class="caption-text">Graphics module</span></p>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../graphics/draw.html">Drawing 2D stuff</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../graphics/sprite.html">Sprites and textures</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../graphics/text.html">Text and fonts</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../graphics/shape.html">Shapes</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../graphics/vertex-array.html">Designing your own entities with vertex arrays</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../graphics/transform.html">Position, rotation, scale: transforming entities</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../graphics/shader.html">Adding special effects with shaders</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../graphics/view.html">Controlling the 2D camera with views</a>
                    </li>
                </ul>
                <p class="caption"><span class="caption-text">Audio module</span></p>
                <ul class="current">
                    <li class="toctree-l1"><a class="reference internal" href="sounds.html">Playing sounds and music</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="recording.html">Recording audio</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="streams.html">Custom audio streams</a>
                    </li>
                    <li class="toctree-l1 current"><a class="reference internal current" href="spatialization.html">Spatialization: Sounds in 3D</a>
    <ul class="current">
    <li class="toctree-l2"><a class="reference internal" href="#introduction">Introduction</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#spatialized-sounds-are-mono">Spatialized sounds are mono</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#the-listener">The listener</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#audio-sources">Audio sources</a>
    </li>
    </ul>
                    </li>
                </ul>
                <p class="caption"><span class="caption-text">Network module</span></p>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../network/socket.html">Communication using sockets</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../network/packet.html">Using packets</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../network/http.html">Web requests with HTTP</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../network/ftp.html">File transfers with FTP</a>
                    </li>
                </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="..">CrSFML Tutorials</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="..">Docs</a> &raquo;</li>
    
      
        
          <li>Audio module &raquo;</li>
        
      
    
    <li>Spatialization: Sounds in 3D</li>
    <li class="wy-breadcrumbs-aside">
      
        <a href="https://github.com/oprypin/crsfml/blob/master/tutorials/audio/spatialization.md"
          class="icon icon-github"> Edit on GitHub</a>
      
    </li>
  </ul>
  
  <hr/>
</div>
          <div role="main">
            <div class="section">
              
                <h1 id="spatialization-sounds-in-3d">Spatialization: Sounds in 3D</h1>
<h2 id="introduction">Introduction</h2>
<p>By default, sounds and music are played at full volume in each speaker; they are not <em>spatialized</em>.</p>
<p>If a sound is emitted by an entity which is to the right of the screen, you would probably want to hear it from the right speaker. If a music is being played behind the player, you would want to hear it from the rear speakers of your Dolby 5.1 sound system.</p>
<p>How can this be achieved?</p>
<h2 id="spatialized-sounds-are-mono">Spatialized sounds are mono</h2>
<p>A sound can be spatialized only if it has a single channel, i.e. if it's a mono sound.<br />
Spatialization is disabled for sounds with more channels, since they already explicitly decide how to use the speakers. This is very important to keep in mind.</p>
<h2 id="the-listener">The listener</h2>
<p>All the sounds and music in your audio environment will be heard by a single actor: the <em>listener</em>. What is output from your speakers is determined by what the listener hears.</p>
<p>The class which defines the listener's properties is <a href="http://oprypin.github.io/crsfml/api/SF/Listener.html">Listener</a>. Since the listener is unique in the environment, this class only contains class methods and is not meant to be instantiated.</p>
<p>First, you can set the listener's position in the scene:</p>
<div class="codehilite"><pre><span></span><code><span class="no">SF</span><span class="o">::</span><span class="n">Listener</span><span class="o">.</span><span class="n">position</span> <span class="o">=</span> <span class="no">SF</span><span class="o">.</span><span class="n">vector3f</span><span class="p">(</span><span class="mf">10.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">5.0</span><span class="p">)</span>
</code></pre></div>

<p>If you have a 2D world you can just use the same Y value everywhere, usually 0.</p>
<p>In addition to its position, you can define the listener's orientation:</p>
<div class="codehilite"><pre><span></span><code><span class="no">SF</span><span class="o">::</span><span class="n">Listener</span><span class="o">.</span><span class="n">direction</span> <span class="o">=</span> <span class="no">SF</span><span class="o">.</span><span class="n">vector3f</span><span class="p">(</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">)</span>
</code></pre></div>

<p>Here, the listener is oriented along the +X axis. This means that, for example, a sound emitted at (15, 0, 5) will be heard from the right speaker.</p>
<p>The "up" vector of the listener is set to (0, 1, 0) by default, in other words, the top of the listener's head is pointing towards +Y. You can change the "up" vector if you want. It is rarely necessary though.</p>
<div class="codehilite"><pre><span></span><code><span class="no">SF</span><span class="o">::</span><span class="n">Listener</span><span class="o">.</span><span class="n">up_vector</span> <span class="o">=</span> <span class="no">SF</span><span class="o">.</span><span class="n">vector3f</span><span class="p">(</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">)</span>
</code></pre></div>

<p>This corresponds to the listener tilting their head towards the right (+X).</p>
<p>Finally, the listener can adjust the global volume of the scene:</p>
<div class="codehilite"><pre><span></span><code><span class="no">SF</span><span class="o">::</span><span class="n">Listener</span><span class="o">.</span><span class="n">global_volume</span> <span class="o">=</span> <span class="mf">50.0</span>
</code></pre></div>

<p>The value of the volume is in the range [0 .. 100], so setting it to 50 reduces it to half of the original volume.</p>
<p>Of course, all these properties can be read with the corresponding getter methods.</p>
<h2 id="audio-sources">Audio sources</h2>
<p>Every audio source provided by SFML (sounds, music, streams) defines the same properties for spatialization.</p>
<p>The main property is the position of the audio source.</p>
<div class="codehilite"><pre><span></span><code><span class="n">sound</span><span class="o">.</span><span class="n">position</span> <span class="o">=</span> <span class="no">SF</span><span class="o">.</span><span class="n">vector3f</span><span class="p">(</span><span class="mf">2.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="o">-</span><span class="mf">5.0</span><span class="p">)</span>
</code></pre></div>

<p>This position is absolute by default, but it can be relative to the listener if needed.</p>
<div class="codehilite"><pre><span></span><code><span class="n">sound</span><span class="o">.</span><span class="n">relative_to_listener</span> <span class="o">=</span> <span class="kc">true</span>
</code></pre></div>

<p>This can be useful for sounds emitted by the listener itself (like a gun shot, or foot steps). It also has the interesting side-effect of disabling spatialization if you set the position of the audio source to (0, 0, 0). Non-spatialized sounds can be required in various situations: GUI sounds (clicks), ambient music, etc.</p>
<p>You can also set the factor by which audio sources will be attenuated depending on their distance to the listener.</p>
<div class="codehilite"><pre><span></span><code><span class="n">sound</span><span class="o">.</span><span class="n">min_distance</span> <span class="o">=</span> <span class="mf">5.0</span>
<span class="n">sound</span><span class="o">.</span><span class="n">attenuation</span> <span class="o">=</span> <span class="mf">10.0</span>
</code></pre></div>

<p>The <em>minimum distance</em> is the distance under which the sound will be heard at its maximum volume. As an example, louder sounds such as explosions should have a higher minimum distance to ensure that they will be heard from far away. Please note that a minimum distance of 0 (the sound is inside the head of the listener!) would lead to an incorrect spatialization and result in a non-attenuated sound. 0 is an invalid value, never use it.</p>
<p>The <em>attenuation</em> is a multiplicative factor. The greater the attenuation, the less it will be heard when the sound moves away from the listener. To get a non-attenuated sound, you can use 0. On the other hand, using a value like 100 will highly attenuate the sound, which means that it will be heard only if very close to the listener.</p>
<p>Here is the exact attenuation formula, in case you need accurate values:</p>
<ul>
<li><em>MinDistance</em>   is the sound's minimum distance, set with min_distance=</li>
<li><em>Attenuation</em>   is the sound's attenuation, set with attenuation=</li>
<li><em>Distance</em>      is the distance between the sound and the listener</li>
<li><em>Volume factor</em> is the calculated factor, in range [0 .. 1], that will be applied to the sound's volume</li>
</ul>
<p><code>Volume factor = MinDistance / (MinDistance + Attenuation * (max(Distance, MinDistance) - MinDistance))</code></p>
              
            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../network/socket.html" class="btn btn-neutral float-right" title="Communication using sockets">Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href="streams.html" class="btn btn-neutral" title="Custom audio streams"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
      
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="versions">
    <span class="rst-current-version" data-toggle="rst-current-version">
      
          <a href="https://github.com/oprypin/crsfml/" class="fa fa-github" style="float: left; color: #fcfcfc"> GitHub</a>
      
      
        <span><a href="streams.html" style="color: #fcfcfc;">&laquo; Previous</a></span>
      
      
        <span style="margin-left: 15px"><a href="../network/socket.html" style="color: #fcfcfc">Next &raquo;</a></span>
      
    </span>
</div>
    <script>var base_url = '..';</script>
    <script src="../js/theme.js" defer></script>
      <script src="../search/main.js" defer></script>
    <script defer>
        window.onload = function () {
            SphinxRtdTheme.Navigation.enable(true);
        };
    </script>

</body>
</html>
