<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  
  
  <link rel="shortcut icon" href="../img/favicon.ico">
  <title>Sprites and textures - CrSFML Tutorials</title>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700" />

  <link rel="stylesheet" href="../css/theme.css" />
  <link rel="stylesheet" href="../css/theme_extra.css" />
  <link href="../codehilite.css" rel="stylesheet" />
  <link href="../style.css" rel="stylesheet" />
  
  <script>
    // Current page data
    var mkdocs_page_name = "Sprites and textures";
    var mkdocs_page_input_path = "graphics/sprite.md";
    var mkdocs_page_url = null;
  </script>
  
  <script src="../js/jquery-2.1.1.min.js" defer></script>
  <script src="../js/modernizr-2.8.3.min.js" defer></script> 
  
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
        <a href=".." class="icon icon-home"> CrSFML Tutorials</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
                <p class="caption"><span class="caption-text">System module</span></p>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../system/time.html">Handling time</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../system/thread.html">Threads</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../system/stream.html">User data streams</a>
                    </li>
                </ul>
                <p class="caption"><span class="caption-text">Window module</span></p>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../window/window.html">Opening and managing an SFML window</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../window/events.html">Events explained</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../window/inputs.html">Keyboard, mouse and joysticks</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../window/opengl.html">Using OpenGL in an SFML window</a>
                    </li>
                </ul>
                <p class="caption"><span class="caption-text">Graphics module</span></p>
                <ul class="current">
                    <li class="toctree-l1"><a class="reference internal" href="draw.html">Drawing 2D stuff</a>
                    </li>
                    <li class="toctree-l1 current"><a class="reference internal current" href="sprite.html">Sprites and textures</a>
    <ul class="current">
    <li class="toctree-l2"><a class="reference internal" href="#vocabulary">Vocabulary</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#loading-a-texture">Loading a texture</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#ok-can-i-have-my-sprite-now">Ok, can I have my sprite now?</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#the-importance-of-using-as-few-textures-as-possible">The importance of using as few textures as possible</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#using-sftexture-with-opengl-code">Using SF::Texture with OpenGL code</a>
    </li>
    </ul>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="text.html">Text and fonts</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="shape.html">Shapes</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="vertex-array.html">Designing your own entities with vertex arrays</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="transform.html">Position, rotation, scale: transforming entities</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="shader.html">Adding special effects with shaders</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="view.html">Controlling the 2D camera with views</a>
                    </li>
                </ul>
                <p class="caption"><span class="caption-text">Audio module</span></p>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../audio/sounds.html">Playing sounds and music</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../audio/recording.html">Recording audio</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../audio/streams.html">Custom audio streams</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../audio/spatialization.html">Spatialization: Sounds in 3D</a>
                    </li>
                </ul>
                <p class="caption"><span class="caption-text">Network module</span></p>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../network/socket.html">Communication using sockets</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../network/packet.html">Using packets</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../network/http.html">Web requests with HTTP</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../network/ftp.html">File transfers with FTP</a>
                    </li>
                </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="..">CrSFML Tutorials</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="..">Docs</a> &raquo;</li>
    
      
        
          <li>Graphics module &raquo;</li>
        
      
    
    <li>Sprites and textures</li>
    <li class="wy-breadcrumbs-aside">
      
        <a href="https://github.com/oprypin/crsfml/blob/tutorials/graphics/sprite.md"
          class="icon icon-github"> Edit on GitHub</a>
      
    </li>
  </ul>
  
  <hr/>
</div>
          <div role="main">
            <div class="section">
              
                <h1 id="sprites-and-textures">Sprites and textures</h1>
<p>Relevant example: <strong><a href="https://github.com/oprypin/crsfml/tree/master/examples/flippy_bird.cr">flippy_bird</a></strong></p>
<h2 id="vocabulary">Vocabulary</h2>
<p>Most (if not all) of you are already familiar with these two very common objects, so let's define them very briefly.</p>
<p>A texture is an image. But we call it "texture" because it has a very specific role: being mapped to a 2D entity.</p>
<p>A sprite is nothing more than a textured rectangle.</p>
<p><img alt="" src="images/sprites-definition.png" /></p>
<p>Ok, that was short but if you really don't understand what sprites and textures are, then you'll find a much better description on Wikipedia.</p>
<h2 id="loading-a-texture">Loading a texture</h2>
<p>Before creating any sprite, we need a valid texture. The class that encapsulates textures in CrSFML is, unsurprisingly, <a href="http://oprypin.github.io/crsfml/api/SF/Texture.html">Texture</a>. Since the only role of a texture is to be loaded and mapped to graphical entities, almost all its methods are about loading and updating it.</p>
<p>The most common way of loading a texture is from an image file on disk, which is done with the <code>from_file</code> class method.</p>
<div class="crystal codehilite"><pre><span></span><code><span class="n">texture</span> <span class="o">=</span> <span class="no">SF</span><span class="o">::</span><span class="n">Texture</span><span class="o">.</span><span class="n">from_file</span><span class="p">(</span><span class="s2">&quot;image.png&quot;</span><span class="p">)</span>
</code></pre></div>

<p>The <code>from_file</code> class method can sometimes fail with no obvious reason. First, check the error message that SFML prints to the standard output (check the console). If the message is unable to open file, make sure that the <em>working directory</em> (which is the directory that any file path will be interpreted relative to) is what you think it is.</p>
<p>You can also load an image file from memory (<code>from_memory</code>), from a <a href="../system/stream.html" title="Input streams tutorial">custom input stream</a> (<code>from_stream</code>), or from an image that has already been loaded (<code>from_image</code>). The latter loads the texture from an <a href="http://oprypin.github.io/crsfml/api/SF/Image.html">Image</a>, which is a utility class that helps store and manipulate image data (modify pixels, create transparency channel, etc.). The pixels of an <a href="http://oprypin.github.io/crsfml/api/SF/Image.html">Image</a> stay in system memory, which ensures that operations on them will be as fast as possible, in contrast to the pixels of a texture which reside in video memory and are therefore slow to retrieve or update but very fast to draw.</p>
<p>SFML supports most common image file formats. The full list is available in the API documentation.</p>
<p>All these loading class methods have an optional argument, which can be used if you want to load a smaller part of the image.</p>
<div class="crystal codehilite"><pre><span></span><code><span class="c1"># load a 32x32 rectangle that starts at (10, 10)</span>
<span class="n">texture</span> <span class="o">=</span> <span class="no">SF</span><span class="o">::</span><span class="n">Texture</span><span class="o">.</span><span class="n">from_file</span><span class="p">(</span><span class="s2">&quot;image.png&quot;</span><span class="p">,</span> <span class="no">SF</span><span class="o">.</span><span class="n">int_rect</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">32</span><span class="p">,</span> <span class="mi">32</span><span class="p">))</span>
</code></pre></div>

<p>The <a href="http://oprypin.github.io/crsfml/api/SF/IntRect">IntRect</a> class is a simple utility type that represents a rectangle. Its constructor takes the coordinates of the top-left corner, and the size of the rectangle.</p>
<p>If you don't want to load a texture from an image, but instead want to update it directly from an array of pixels, you can create it empty and update it later:</p>
<div class="crystal codehilite"><pre><span></span><code><span class="c1"># create an empty 200x200 texture</span>
<span class="n">texture</span> <span class="o">=</span> <span class="no">SF</span><span class="o">::</span><span class="n">Texture</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="mi">200</span><span class="p">,</span> <span class="mi">200</span><span class="p">)</span>
</code></pre></div>

<p>Note that the contents of the texture are undefined at this point.</p>
<p>To update the pixels of an existing texture, you have to use the <code>update</code> method. It has overloads for many kinds of data sources:</p>
<div class="crystal codehilite"><pre><span></span><code><span class="c1"># update a texture from an array of pixels</span>
<span class="n">texture</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">pixels</span><span class="p">)</span>

<span class="c1"># update a texture from a SF::Image</span>
<span class="n">texture</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">image</span><span class="p">)</span>

<span class="c1"># update the texture from the current contents of the window</span>
<span class="n">texture</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">window</span><span class="p">)</span>
</code></pre></div>

<p>These examples all assume that the source is of the same size as the texture. If this is not the case, i.e. if you want to update only a part of the texture, you can specify the coordinates of the sub-rectangle that you want to update. You can refer to the documentation for further details.</p>
<p>Additionally, a texture has two properties that change how it is rendered.</p>
<p>The first property allows one to smooth the texture. Smoothing a texture makes pixel boundaries less visible (but the image a little more blurry), which can be desirable if it is up-scaled.</p>
<div class="crystal codehilite"><pre><span></span><code><span class="n">texture</span><span class="o">.</span><span class="n">smooth</span> <span class="o">=</span> <span class="kc">true</span>
</code></pre></div>

<p><img alt="" src="images/sprites-smooth.png" /></p>
<p>Since smoothing samples from adjacent pixels in the texture as well, it can lead to the unwanted side effect of factoring in pixels outside the selected texture area. This can happen when your sprite is located at non-integer coordinates.</p>
<p>The second property allows a texture to be repeatedly tiled within a single sprite.</p>
<div class="crystal codehilite"><pre><span></span><code><span class="n">texture</span><span class="o">.</span><span class="n">repeated</span> <span class="o">=</span> <span class="kc">true</span>
</code></pre></div>

<p><img alt="" src="images/sprites-repeated.png" /></p>
<p>This only works if your sprite is configured to show a rectangle which is larger than the texture, otherwise this property has no effect.</p>
<h2 id="ok-can-i-have-my-sprite-now">Ok, can I have my sprite now?</h2>
<p>Yes, you can now create your sprite.</p>
<div class="crystal codehilite"><pre><span></span><code><span class="n">sprite</span> <span class="o">=</span> <span class="no">SF</span><span class="o">::</span><span class="n">Sprite</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="n">texture</span><span class="p">)</span>
</code></pre></div>

<p>... and finally draw it.</p>
<div class="crystal codehilite"><pre><span></span><code><span class="c1"># inside the main loop, between window.clear() and window.display()</span>
<span class="n">window</span><span class="o">.</span><span class="n">draw</span><span class="p">(</span><span class="n">sprite</span><span class="p">)</span>
</code></pre></div>

<p>If you don't want your sprite to use the entire texture, you can set its texture rectangle.</p>
<div class="crystal codehilite"><pre><span></span><code><span class="n">sprite</span><span class="o">.</span><span class="n">texture_rect</span> <span class="o">=</span> <span class="no">SF</span><span class="o">.</span><span class="n">int_rect</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">32</span><span class="p">,</span> <span class="mi">32</span><span class="p">)</span>
</code></pre></div>

<p>You can also change the color of a sprite. The color that you set is modulated (multiplied) with the texture of the sprite. This can also be used to change the global transparency (alpha) of the sprite.</p>
<div class="crystal codehilite"><pre><span></span><code><span class="n">sprite</span><span class="o">.</span><span class="n">color</span> <span class="o">=</span> <span class="no">SF</span><span class="o">.</span><span class="n">color</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">255</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span> <span class="c1"># green</span>
<span class="n">sprite</span><span class="o">.</span><span class="n">color</span> <span class="o">=</span> <span class="no">SF</span><span class="o">.</span><span class="n">color</span><span class="p">(</span><span class="mi">255</span><span class="p">,</span> <span class="mi">255</span><span class="p">,</span> <span class="mi">255</span><span class="p">,</span> <span class="mi">128</span><span class="p">)</span> <span class="c1"># half transparent</span>
</code></pre></div>

<p>These sprites all use the same texture, but have a different color:</p>
<p><img alt="" src="images/sprites-color.png" /></p>
<p>Sprites can also be transformed: They have a position, an orientation and a scale.</p>
<div class="crystal codehilite"><pre><span></span><code><span class="c1"># position</span>
<span class="n">sprite</span><span class="o">.</span><span class="n">position</span> <span class="o">=</span> <span class="no">SF</span><span class="o">.</span><span class="n">vector2</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">50</span><span class="p">)</span> <span class="c1"># absolute position</span>
<span class="n">sprite</span><span class="o">.</span><span class="n">move</span><span class="p">(</span><span class="no">SF</span><span class="o">.</span><span class="n">vector2</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">10</span><span class="p">))</span> <span class="c1"># offset relative to the current position</span>

<span class="c1"># rotation</span>
<span class="n">sprite</span><span class="o">.</span><span class="n">rotation</span> <span class="o">=</span> <span class="mi">90</span> <span class="c1"># absolute angle</span>
<span class="n">sprite</span><span class="o">.</span><span class="n">rotate</span><span class="p">(</span><span class="mi">15</span><span class="p">)</span> <span class="c1"># offset relative to the current angle</span>

<span class="c1"># scale</span>
<span class="n">sprite</span><span class="o">.</span><span class="n">scale</span> <span class="o">=</span> <span class="no">SF</span><span class="o">.</span><span class="n">vector2</span><span class="p">(</span><span class="mf">0.5</span><span class="p">,</span> <span class="mf">2.0</span><span class="p">)</span> <span class="c1"># absolute scale factor</span>
<span class="n">sprite</span><span class="o">.</span><span class="n">scale</span><span class="p">(</span><span class="no">SF</span><span class="o">.</span><span class="n">vector2</span><span class="p">(</span><span class="mf">1.5</span><span class="p">,</span> <span class="mf">3.0</span><span class="p">))</span> <span class="c1"># factor relative to the current scale</span>
</code></pre></div>

<p>By default, the origin for these three transformations is the top-left corner of the sprite. If you want to set the origin to a different point (for example the center of the sprite, or another corner), you can use the <code>origin=</code> method.</p>
<div class="crystal codehilite"><pre><span></span><code><span class="n">sprite</span><span class="o">.</span><span class="n">origin</span> <span class="o">=</span> <span class="no">SF</span><span class="o">.</span><span class="n">vector2</span><span class="p">(</span><span class="mi">25</span><span class="p">,</span> <span class="mi">25</span><span class="p">)</span>
</code></pre></div>

<p>Since transformation methods are common to all CrSFML entities, they are explained in a separate tutorial: <a href="transform.html" title="'Transforming entities' tutorial">Transforming entities</a>.</p>
<h2 id="the-importance-of-using-as-few-textures-as-possible">The importance of using as few textures as possible</h2>
<p>Using as few textures as possible is a good strategy, and the reason is simple: Changing the current texture is an expensive operation for the graphics card. Drawing many sprites that use the same texture will yield the best performance.</p>
<p>Additionally, using a single texture allows you to group static geometry into a single entity (you can only use one texture per <code>draw</code> call), which will be much faster to draw than a set of many entities. Batching static geometry involves other classes and is therefore beyond the scope of this tutorial, for further details see the <a href="vertex-array.html" title="Vertex array tutorial">vertex array</a> tutorial.</p>
<p>Try to keep this in mind when you create your animation sheets or your tilesets: Use as few textures as possible.</p>
<h2 id="using-sftexture-with-opengl-code">Using SF::Texture with OpenGL code</h2>
<p>If you're using OpenGL rather than the graphics entities of CrSFML, you can still use <a href="http://oprypin.github.io/crsfml/api/SF/Texture.html">Texture</a> as a wrapper around an OpenGL texture object and use it along with the rest of your OpenGL code.</p>
<p>To bind a <a href="http://oprypin.github.io/crsfml/api/SF/Texture.html">Texture</a> for drawing (basically <code>glBindTexture</code>), you call the <code>bind</code> class method:</p>
<div class="crystal codehilite"><pre><span></span><code><span class="n">texture</span> <span class="o">=</span> <span class="o">...</span>

<span class="c1"># bind the texture</span>
<span class="no">SF</span><span class="o">::</span><span class="n">Texture</span><span class="o">.</span><span class="n">bind</span> <span class="n">texture</span>

<span class="c1"># draw your textured OpenGL entity here...</span>

<span class="c1"># bind no texture</span>
<span class="no">SF</span><span class="o">::</span><span class="n">Texture</span><span class="o">.</span><span class="n">bind</span> <span class="kc">nil</span>
</code></pre></div>
              
            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="text.html" class="btn btn-neutral float-right" title="Text and fonts">Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href="draw.html" class="btn btn-neutral" title="Drawing 2D stuff"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
      
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="versions">
    <span class="rst-current-version" data-toggle="rst-current-version">
      
          <a href="https://github.com/oprypin/crsfml/" class="fa fa-github" style="float: left; color: #fcfcfc"> GitHub</a>
      
      
        <span><a href="draw.html" style="color: #fcfcfc;">&laquo; Previous</a></span>
      
      
        <span style="margin-left: 15px"><a href="text.html" style="color: #fcfcfc">Next &raquo;</a></span>
      
    </span>
</div>
    <script>var base_url = '..';</script>
    <script src="../js/theme.js" defer></script>
      <script src="../search/main.js" defer></script>
    <script defer>
        window.onload = function () {
            SphinxRtdTheme.Navigation.enable(true);
        };
    </script>

</body>
</html>
