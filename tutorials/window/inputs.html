<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  
  
  <link rel="shortcut icon" href="../img/favicon.ico">
  <title>Keyboard, mouse and joysticks - CrSFML Tutorials</title>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700" />

  <link rel="stylesheet" href="../css/theme.css" />
  <link rel="stylesheet" href="../css/theme_extra.css" />
  <link href="../style.css" rel="stylesheet" />
  
  <script>
    // Current page data
    var mkdocs_page_name = "Keyboard, mouse and joysticks";
    var mkdocs_page_input_path = "window/inputs.md";
    var mkdocs_page_url = null;
  </script>
  
  <script src="../js/jquery-2.1.1.min.js" defer></script>
  <script src="../js/modernizr-2.8.3.min.js" defer></script> 
  
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
        <a href=".." class="icon icon-home"> CrSFML Tutorials</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
                <p class="caption"><span class="caption-text">System module</span></p>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../system/time.html">Handling time</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../system/thread.html">Threads</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../system/stream.html">User data streams</a>
                    </li>
                </ul>
                <p class="caption"><span class="caption-text">Window module</span></p>
                <ul class="current">
                    <li class="toctree-l1"><a class="reference internal" href="window.html">Opening and managing an SFML window</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="events.html">Events explained</a>
                    </li>
                    <li class="toctree-l1 current"><a class="reference internal current" href="inputs.html">Keyboard, mouse and joysticks</a>
    <ul class="current">
    <li class="toctree-l2"><a class="reference internal" href="#introduction">Introduction</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#keyboard">Keyboard</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#mouse">Mouse</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#joystick">Joystick</a>
    </li>
    </ul>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="opengl.html">Using OpenGL in an SFML window</a>
                    </li>
                </ul>
                <p class="caption"><span class="caption-text">Graphics module</span></p>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../graphics/draw.html">Drawing 2D stuff</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../graphics/sprite.html">Sprites and textures</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../graphics/text.html">Text and fonts</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../graphics/shape.html">Shapes</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../graphics/vertex-array.html">Designing your own entities with vertex arrays</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../graphics/transform.html">Position, rotation, scale: transforming entities</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../graphics/shader.html">Adding special effects with shaders</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../graphics/view.html">Controlling the 2D camera with views</a>
                    </li>
                </ul>
                <p class="caption"><span class="caption-text">Audio module</span></p>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../audio/sounds.html">Playing sounds and music</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../audio/recording.html">Recording audio</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../audio/streams.html">Custom audio streams</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../audio/spatialization.html">Spatialization: Sounds in 3D</a>
                    </li>
                </ul>
                <p class="caption"><span class="caption-text">Network module</span></p>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../network/socket.html">Communication using sockets</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../network/packet.html">Using packets</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../network/http.html">Web requests with HTTP</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../network/ftp.html">File transfers with FTP</a>
                    </li>
                </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="..">CrSFML Tutorials</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="..">Docs</a> &raquo;</li>
    
      
        
          <li>Window module &raquo;</li>
        
      
    
    <li>Keyboard, mouse and joysticks</li>
    <li class="wy-breadcrumbs-aside">
      
        <a href="https://github.com/oprypin/crsfml/blob/tutorials/window/inputs.md"
          class="icon icon-github"> Edit on GitHub</a>
      
    </li>
  </ul>
  
  <hr/>
</div>
          <div role="main">
            <div class="section">
              
                <h1 id="keyboard-mouse-and-joystick">Keyboard, mouse and joystick</h1>
<p>Relevant example: <strong><a href="https://github.com/oprypin/crsfml/tree/master/examples/diagnostics.cr">diagnostics</a></strong></p>
<h2 id="introduction">Introduction</h2>
<p>This tutorial explains how to access global input devices: keyboard, mouse and joysticks. This must not be confused with events. Real-time input allows you to query the global state of keyboard, mouse and joysticks at any time ("<em>is this button currently pressed?</em>", "<em>where is the mouse currently?</em>") while events notify you when something happens ("<em>this button was pressed</em>", "<em>the mouse has moved</em>").</p>
<h2 id="keyboard">Keyboard</h2>
<p>The class that provides access to the keyboard state is <a href="http://oprypin.github.io/crsfml/api/SF/Keyboard.html">Keyboard</a>. It only contains one class method, <code>key_pressed?</code>, which checks the current state of a key (pressed or released). It is a class method, so you don't need to instantiate <a href="http://oprypin.github.io/crsfml/api/SF/Keyboard.html">Keyboard</a> to use it.</p>
<p>This class method directly reads the keyboard state, ignoring the focus state of your window. This means that <code>key_pressed?</code> may return true even if your window is inactive.</p>
<pre class="codehilite"><code class="language-crystal">if SF::Keyboard.key_pressed?(SF::Keyboard::Left)
  # left key is pressed: move our character
  character.move(1, 0)
end</code></pre>


<p>Key codes are defined in the <code>SF::Keyboard::Key</code> enum.</p>
<p>Depending on your operating system and keyboard layout, some key codes might be missing or interpreted incorrectly. This is something that will be improved in a future version of SFML.</p>
<h2 id="mouse">Mouse</h2>
<p>The class that provides access to the mouse state is <a href="http://oprypin.github.io/crsfml/api/SF/Mouse.html">Mouse</a>. Like its friend <a href="http://oprypin.github.io/crsfml/api/SF/Keyboard.html">Keyboard</a>, <a href="http://oprypin.github.io/crsfml/api/SF/Mouse.html">Mouse</a> only contains class methods and is not meant to be instantiated (SFML only handles a single mouse for the time being).</p>
<p>You can check if buttons are pressed:</p>
<pre class="codehilite"><code class="language-crystal">if SF::Mouse.button_pressed?(SF::Mouse::Left)
  # left mouse button is pressed: shoot
  gun.fire
end</code></pre>


<p>Mouse button codes are defined in the <code>SF::Mouse::Button</code> enum. SFML supports up to 5 buttons: left, right, middle (wheel), and two additional buttons whatever they may be.</p>
<p>You can also get and set the current position of the mouse, either relative to the desktop or to a window:</p>
<pre class="codehilite"><code class="language-crystal"># get the global mouse position (relative to the desktop)
global_position = SF::Mouse.position

# get the local mouse position (relative to a window)
local_position = SF::Mouse.get_position(window) # window is a SF::Window</code></pre>


<pre class="codehilite"><code class="language-crystal"># set the mouse position globally (relative to the desktop)
SF::Mouse.position = SF.vector2(10, 50)

# set the mouse position locally (relative to a window)
SF::Mouse.set_position(SF.vector2(10, 50), window) # window is a SF::Window</code></pre>


<p>There is no function for reading the current state of the mouse wheel. Since the wheel can only be moved relatively, it has no absolute state that can be queried. By looking at a key you can tell whether it's pressed or released. By looking at the mouse cursor you can tell where it is located on the screen. However, looking at the mouse wheel doesn't tell you which "tick" it is on. You can only be notified when it moves (<code>MouseWheelMoved</code> event).</p>
<h2 id="joystick">Joystick</h2>
<p>The class that provides access to the joysticks' states is <a href="http://oprypin.github.io/crsfml/api/SF/Joystick.html">Joystick</a>. Like the other classes in this tutorial, it only contains class methods.</p>
<p>Joysticks are identified by their index (0 to 7, since SFML supports up to 8 joysticks). Therefore, the first argument of every class method of <a href="http://oprypin.github.io/crsfml/api/SF/Joystick.html">Joystick</a> is the index of the joystick that you want to query.</p>
<p>You can check whether a joystick is connected or not:</p>
<pre class="codehilite"><code class="language-crystal">if SF::Joystick.connected?(0)
  # joystick number 0 is connected
  ...
end</code></pre>


<p>You can also get the capabilities of a connected joystick:</p>
<pre class="codehilite"><code class="language-crystal"># check how many buttons joystick number 0 has
button_count = SF::Joystick.get_button_count(0)

# check if joystick number 0 has a Z axis
has_z = SF::Joystick.axis?(0, SF::Joystick::Z)</code></pre>


<p>Joystick axes are defined in the <code>SF::Joystick::Axis</code> enum. Since buttons have no special meaning, they are simply numbered from 0 to 31.</p>
<p>Finally, you can query the state of a joystick's axes and buttons as well:</p>
<pre class="codehilite"><code class="language-crystal"># is button 1 of joystick number 0 pressed?
if SF::Joystick.button_pressed?(0, 1)
  # yes: shoot!
  gun.fire
end

# what's the current position of the X and Y axes of joystick number 0?
x = SF::Joystick.get_axis_position(0, SF::Joystick::X)
y = SF::Joystick.get_axis_position(0, SF::Joystick::Y)
character.move(x, y)</code></pre>


<p>Joystick states are automatically updated when you check for events. If you don't check for events, or need to query a joystick state (for example, checking which joysticks are connected) before starting your game loop, you'll have to manually call the <code>SF::Joystick.update</code> class method yourself to make sure that the joystick states are up to date.</p>
              
            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="opengl.html" class="btn btn-neutral float-right" title="Using OpenGL in an SFML window">Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href="events.html" class="btn btn-neutral" title="Events explained"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
      
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="versions">
    <span class="rst-current-version" data-toggle="rst-current-version">
      
          <a href="https://github.com/oprypin/crsfml/" class="fa fa-github" style="float: left; color: #fcfcfc"> GitHub</a>
      
      
        <span><a href="events.html" style="color: #fcfcfc;">&laquo; Previous</a></span>
      
      
        <span style="margin-left: 15px"><a href="opengl.html" style="color: #fcfcfc">Next &raquo;</a></span>
      
    </span>
</div>
    <script>var base_url = '..';</script>
    <script src="../js/theme.js" defer></script>
      <script src="../search/main.js" defer></script>
    <script defer>
        window.onload = function () {
            SphinxRtdTheme.Navigation.enable(true);
        };
    </script>

</body>
</html>
